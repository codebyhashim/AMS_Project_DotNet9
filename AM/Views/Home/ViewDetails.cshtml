@using AM.ApplicationCore.Models
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager
@model DoctorModel

@{
    Layout = "_HomeLayout";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width" />
    <title>ViewDetails</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .suggestion-card {
            padding: 10px;
            border-radius: 10px;
            background-color: #f8f9fa;
        }

            .suggestion-card img {
                border-radius: 50%;
                margin-right: 10px;
            }

        .profile-card img {
            border-radius: 50%;
            margin-right: 10px;
        }

        /* Custom styling for the suggestion sidebar */
        .suggestion-sidebar {
            position: sticky;
            top: 20px;
            height: calc(100vh - 20px);
        }
    </style>
</head>
<body>
    <div class="container mt-4 " >
        <div class="fw-bold fs-4">Details</div>
        <div class="row" style="border:2px solid white; height:320px ">
            <!-- Doctor Profile Section -->
            <div class="col-md-8">
                <div class="card p-4">
                    <div class="row">
                        <div class="col-md-4" >
                            <img src="@Url.Content("~/uploads/" + Model.ImagePath)" class="img-fluid rounded" alt="Doctor Image" style="width: 400px; height: 250px;" />
                        </div>
                        <div class="col-md-8">
                            <h3 class="mt-3">Dr.@Model.Name</h3>
                            <p><i class="bi bi-mortarboard"></i></i> @Model.Experience Years of Experience</p>
                            <p><i class="bi bi-geo-alt"></i> @Model.Address</p>
                            <p><i class="bi bi-clock"></i> WaitTime @Model.WaitTime </p>

                            @* <span class="badge bg-primary">@Model.Speciality</span> *@
                            <span class="text-muted text-primary  " style="margin-bottom:10px; font-size:12px; border-radius:100px;background-color:#ADD8E6;padding: 5px 10px  ">@Model.Speciality</span>
                           @*  <div class="mt-2">
                                <a href="#" class="btn btn-outline-primary btn-sm me-1"><i class="bi bi-youtube"></i></a>
                                <a href="#" class="btn btn-outline-primary btn-sm me-1"><i class="bi bi-linkedin"></i></a>
                                <a href="#" class="btn btn-outline-primary btn-sm me-1"><i class="bi bi-twitter"></i></a>
                                <a href="#" class="btn btn-outline-primary btn-sm"><i class="bi bi-facebook"></i></a>
                            </div> *@
                            <div></div>
                          
                             @* <a asp-action="MakeAppoinment" asp-controller="Patient" class="btn btn-primary mt-3" style="border-radius:100px;padding:1px 40px;width:220px">Book Appointment</a>  *@

                            @if (SignInManager.IsSignedIn(User))
                            {
                                var currentUser = await UserManager.GetUserAsync(User);
                                var roles = await UserManager.GetRolesAsync(currentUser);

                                 if (roles.Contains("Admin"))
                                {
                                    <a class="nav-item"><a class="btn btn-primary mt-3" asp-controller="Admin" asp-action="Index">Dashboard</a></a>
                                }
                                else if (roles.Contains("Doctor"))
                                {
                                    <a class="nav-item"><a class="btn btn-primary mt-3" asp-controller="Doctor" asp-action="Index"> Dashboard</a></a>
                                }
                                else  
                                if (roles.Contains("Patient"))
                                {
                                    <a asp-action="MakeAppoinment" asp-controller="Patient" class="btn btn-primary mt-3" style="border-radius:100px;padding:1px 40px;width:220px">Book Appointment</a>  

                                }else{
                                    <button  class="btn btn-primary mt-3" style="border-radius:100px;padding:1px 40px;width:220px">Book Appointment</button>

                                }


                            }
                         </div>
                    </div>
                </div>
            </div>

            <!-- Suggestions Sidebar -->
            <div class="col-lg-4 d-sm-none d-lg-block suggestion-sidebar " >
                <div class="card p-3" style=" height:600px">
                    @if (ViewBag.suggestDtr != null && ViewBag.suggestDtr is List<DoctorModel>)
                    {
                    <h5>Suggestions</h5>
                        foreach (var doctor in (List<DoctorModel>)ViewBag.suggestDtr)
                        {
                            <div class="d-flex align-items-center mb-3 suggestion-card">
                                <img style="height:100px; width:100px;border-radius:200px; " src="@Url.Content("~/uploads/" + doctor.ImagePath)" class="img-fluid " alt="Doctor Image" />
                                <div class="ms-3">
                                    <h6 class="mb-0">Dr.@doctor.Name</h6>
                                    <small>@doctor.Speciality - @doctor.Experience Years</small>
                                </div>
                            </div>
                        }
                    }
                    else
                    {
                        <p>No suggestions available.</p>
                    }
                </div>
            </div>
        </div>

        <!-- About Me Section (placed below profile and suggestions) -->
        <div class="col-md-8 card p-4  mt-0 " style=" height:300px">
            <h5>About Me</h5>
            <p>@Model.Description</p>
        </div>
    </div>

    <!-- Bootstrap JS (optional) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
